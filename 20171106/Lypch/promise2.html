<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="jquery.js" charset="utf-8"></script>
        <script>
            //第一步：创建一个Promise对象，参数需要一个callback函数，代码都写在callback函数中
            //通过ajax来读取数据，并在成功的时候，把读取的结果传给resolve函数，在失败的时候
            //把错误的内容给reject
            let p1 = new Promise(function(resolve , reject){
                //resolve -- 解决 成功
                //reject  -- 拒绝 失败
                $.ajax({
                    url:'data/1.txt',
                    dataType: "json",
                    success(arr){
                        resolve(arr);
                    },
                    error(err){
                        reject(err);
                    }
                });
            });

            let p2 = new Promise(function(resolve , reject){
                //resolve -- 解决 成功
                //reject  -- 拒绝 失败
                $.ajax({
                    url:'data/2.txt',
                    dataType: "json",
                    success(arr){
                        resolve(arr);
                    },
                    error(err){
                        reject(err);
                    }
                });
            });

            let p3 = new Promise(function(resolve , reject){
                //resolve -- 解决 成功
                //reject  -- 拒绝 失败
                $.ajax({
                    url:'data/3.txt',
                    dataType: "json",
                    success(arr){
                        resolve(arr);
                    },
                    error(err){
                        reject(err);
                    }
                });
            });

            //第二步：通过p.then来进行后续的处理，第一个参数就是resolve，第二个参数是reject
            Promise.all([p1,p2,p3]).then(arr=>{
                let [r1,r2,r3]=arr;
                alert(r1);
                alert(r2);
                alert(r3);
            } , err=>{
                console.log(err);
            } );


        </script>
    </head>
    <body>

    </body>
</html>
